#!/bin/bash

# data_extraction_automation-0x01
# Script to extract Pikachu's name, height, weight, and type from data.json

# Input file
DATA_FILE="data.json"

# Check if data.json exists
if [ ! -f "$DATA_FILE" ]; then
    echo "Error: $DATA_FILE not found"
    exit 1
fi

# Extract data using jq and format with awk and sed
jq -r '{name: .name, height: .height, weight: .weight, type: .types[0].type.name}' "$DATA_FILE" | \
awk '{
    if ($0 ~ /"name"/) name=tolower($2); sub(/"/,"",name); name=toupper(substr(name,1,1)) substr(name,2)
    if ($0 ~ /"height"/) height=$2/10
    if ($0 ~ /"weight"/) weight=$2/10
    if ($0 ~ /"type"/) type=tolower($2); sub(/"/,"",type); type=toupper(substr(type,1,1)) substr(type,2)
} END {
    printf "%s is of type %s, weighs %.1fkg, and is %.1fm tall.\n", name, type, weight, height
}' | sed 's/,//g'